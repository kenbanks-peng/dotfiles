# "$schema" = "https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json"
version = 4
final_space = true

[palette]
shell = '#005b95'              # blue
shell-foreground = '#e5eaf0'
root = '#a90000'               # red
root-foreground = '#f4e4e5'
fnox = '#f55c1b'               # orange
fnox-foreground = '#e5ece6'
jobs = '#006b1d'               # green
jobs-foreground = '#e5ece6'
directory = '#2f40c2'          # blue
directory-foreground = '#e5e6f2'
language = '#005b95'           # blue
language-foreground = '#e5eaf0'
git = '#006b1d'                # green
git-foreground = '#e5ece6'
git-modified = '#a17a00'       # yellow
git-diverged = '#8c0888'       # magenta
git-ahead = '#8c0888'          # magenta
git-behind = '#8c0888'         # magenta
status = '#005b95'             # blue
status-foreground = '#e5eaf0'
status-error = '#a90000'       # red
exectime-foreground = '#e5eaf0'
error = '#a90000'              # red
error-foreground = '#f4e4e5'
prompt = '#f55c1b'             # orange
secondary = '#a90000'          # red
secondary-accent = '#a17a00'   # yellow

# [transient_prompt]
#   template = '<p:teal,transparent></><p:on_teal,p:teal>   </><p:teal,transparent></> '
#   foreground = 'p:teal'
#   background = 'transparent'
#   newline = true

[secondary_prompt]
template = '<p:secondary,transparent></><,p:secondary-accent> > </><p:secondary-accent,transparent></> '
foreground = 'p:secondary'
background = 'transparent'

[[blocks]]
type = 'prompt'
alignment = 'left'
newline = true

######### SHELL #########

[[blocks.segments]]
type = 'shell'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:shell'
foreground = 'p:shell-foreground'
templates = [
  '{{ if eq .Name "zsh" }}  {{ end }}',
  '{{ if eq .Name "bash" }}  {{ end }}',
  '{{ if eq .Name "fish" }}   {{ end }}',
  '{{ if eq .Name "nu" }} 󰫻󰬂 {{ end }}',
]
templates_logic = 'first_match'

######### ROOT #########

[[blocks.segments]]
type = 'root'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
foreground = 'p:root-foreground'
background = 'p:root'
template = '  '

######### FNOX #########

[[blocks.segments]]
type = 'text'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
foreground = 'p:fnox-foreground'
background = 'p:fnox'
template = "{{ if .Env.FNOX_SHELL }}  {{ end }}"

######### JOBS #########

# using shell function set_poshcontext()
[[blocks.segments]]
type = 'text'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:jobs'
foreground = 'p:jobs-foreground'
template = ' {{ .Env.JOBCOUNT }} '

######### SSH #########

[[blocks.segments]]
type = "session"
style = "diamond"
leading_diamond = ""
trailing_diamond = ""
background = 'p:jobs'
foreground = 'p:jobs-foreground'
template = "{{ if .SSHSession }} {{ .UserName }}@{{ .HostName }}{{ end }}"

######### DIRECTORY #########

# using shell function set_poshcontext()
[[blocks.segments]]
type = 'text'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:directory'
foreground = 'p:directory-foreground'
template = ' {{ .Env.DIRPATH }} '

######### LANGUAGES #########

[[blocks.segments]]
type = 'go'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:language'
foreground = 'p:language-foreground'
template = ' go {{ .Full }} '

[[blocks.segments]]
type = 'lua'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:language'
foreground = 'p:language-foreground'
template = '  {{ .Full }} '

[[blocks.segments]]
type = 'zig'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:language'
foreground = 'p:language-foreground'
template = '  {{ .Full }} '

# [[blocks.segments]]
# type = 'rust'
# style = 'diamond'
# leading_diamond = ''
# trailing_diamond = ''
# background = 'p:language'
# foreground = 'p:language-foreground'
# template = '  {{ .Full }} '

# javascript: deno, svelte, react, node
# using shell function set_poshcontext()
[[blocks.segments]]
type = 'text'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:language'
foreground = 'p:language-foreground'
template = ' {{ .Env.JS_SEGMENT }} '

# python: icon by files, version if in venv
# using shell function set_poshcontext()
[[blocks.segments]]
type = 'text'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:language'
foreground = 'p:language-foreground'
template = ' {{ .Env.PYTHON_SEGMENT }} '

######### DOCKER #########

[[blocks.segments]]
type = 'docker'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:language'
foreground = 'p:language-foreground'
template = '   '
options = { display_mode = 'files' }

######### GIT #########

[[blocks.segments]]
type = 'git'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
background = 'p:git'
foreground = 'p:git-foreground'
template = ' {{ if .UpstreamURL }}{{ url .UpstreamIcon .UpstreamURL }} {{ end }}{{ .HEAD }}{{ if .Working.Changed }} 󱩽{{ end }}{{ if gt .Ahead 0 }} {{ .Ahead }}{{ end }}{{ if gt .Behind 0 }} {{ .Behind }}{{ end }}{{ if and (not .Working.Changed) (eq .Ahead 0) (eq .Behind 0) }} {{ end }} '
background_templates = [
  '{{ if or .Working.Changed .Staging.Changed }}p:git-modified{{ end }}',
  '{{ if or (gt .Ahead 0) (gt .Behind 0) }}p:git-diverged{{ end }}',
]
options = { branch_template = '{{ trunc 25 .Branch }}', fetch_status = true, fetch_upstream_icon = true }

######### STATUS ENDCAP #########

[[blocks.segments]]
type = 'status'
style = 'accordion'
leading_powerline_symbol = '<transparent,background></>'
powerline_symbol = ''
background = 'p:status'
foreground = 'p:status-foreground'
template = '   '
background_templates = ['{{ if gt .Code 0 }}p:status-error{{ end }}']
options = { always_enabled = true }

[[blocks]]
type = 'prompt'
alignment = 'right'

[[blocks.segments]]
type = 'executiontime'
style = 'plain'
foreground = 'p:exectime-foreground'
template = '󰄉 {{ .FormattedMs }} '
options = { threshold = 1000 }

[[blocks.segments]]
type = 'text'
style = 'diamond'
leading_diamond = ''
trailing_diamond = ''
foreground = 'p:error-foreground'
background = 'p:error'
template = '{{if .Segments.Status.Error }}{{ .Segments.Status.String }}{{ end }}'


######### NEW_LINE - SHELL LEVEL PROMPT #########

[[blocks]]
type = 'prompt'
alignment = 'left'
newline = true

# using shell function set_poshcontext()
[[blocks.segments]]
type = 'text'
style = 'plain'
background = 'transparent'
foreground = 'p:prompt'
template = '{{ if .Env.SHLVL_RELATIVE }}{{ repeat (.Env.SHLVL_RELATIVE | int) "❯" }}{{ else }}{{ repeat .SHLVL "❯" }}{{ end }}'
