#!/usr/bin/env bash
# [MISE] description="Find files or text (combined fd/rg)"
# [MISE] dir="{{cwd}}"

# Usage:
#   fd [pattern]                    - Find files by regex (default)
#   fd text [pattern]               - Search for text in files
#   fd glob [glob-pattern]          - Find files by glob pattern
#   fd tglob [glob] [text-pattern]  - Search for text in files matching glob

case "$1" in
    text)
        shift
        command rg --hidden --no-ignore "$@" || true
        ;;
    glob)
        shift
        command fd --hidden --no-ignore --glob "$@"
        ;;
    tglob)
        shift
        if [[ $# -lt 2 ]]; then
            echo "Error: tglob requires both glob pattern and text pattern"
            echo "Usage: fd tglob [glob-pattern] [text-pattern]"
            exit 1
        fi
        glob_pattern="$1"
        shift
        command rg --hidden --no-ignore --glob "$glob_pattern" "$@" || true
        ;;
    *)
        # Default: file search
        command fd --hidden --no-ignore "$@"
        ;;
esac
