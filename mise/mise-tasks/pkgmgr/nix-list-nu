#!/usr/bin/env nu
# [MISE] description="Nix profile list packages with versions"
# [MISE] dir="{{cwd}}"

# Extract package-version from nix profile list store paths

(do -i { nix profile list }
  | lines
  | where {|line| ($line | str starts-with "Store paths:")}
  | each {|line| $line | split row " " | last}
  | each {|path| $path | path basename | str substring 33..}
  | sort)
